<containerized-grid-table-view title="Containers" [columns]="columns" [values]="dockerContainers()">
  <ng-template #actions let-dockerContainers="value">
    @if (hasStoppedContainers(dockerContainers)) {
      <button mat-icon-button (click)="startContainers(dockerContainers)">
        <mat-icon>play_arrow</mat-icon>
      </button>
    }

    @if (hasStartedContainers(dockerContainers)) {
      <button mat-icon-button (click)="restartContainers(dockerContainers)">
        <mat-icon>sync</mat-icon>
      </button>
      <button mat-icon-button (click)="stopContainers(dockerContainers)">
        <mat-icon>stop</mat-icon>
      </button>
    }
  </ng-template>

  <ng-template #cardHeader let-dockerContainer="value">
    <mat-card-title class="grow">{{ dockerContainer.names }}</mat-card-title>
    <containerized-dot [title]="dockerContainer.status" [color]="indicatorColor(dockerContainer.status)" />
  </ng-template>

  <ng-template #cardContent let-dockerContainer="value">
    @for (port of dockerContainer.ports; track port) {
      <span>{{ port.container }}</span> -> <span>{{ port.host }}</span>
    }
  </ng-template>

  <ng-template #cardFooter let-dockerContainer="value">
    @if (dockerContainer.status == 'exited' || dockerContainer.status == 'created') {
      <button mat-icon-button (click)="startContainer(dockerContainer)">
        <mat-icon>play_arrow</mat-icon>
      </button>
    } @else if (dockerContainer.status == 'running') {
      <button mat-icon-button (click)="restartContainer(dockerContainer)">
        <mat-icon>sync</mat-icon>
      </button>
      <button mat-icon-button (click)="stopContainer(dockerContainer)">
        <mat-icon>stop</mat-icon>
      </button>
    }

    @if (dockerContainer.status != 'starting' && dockerContainer.status != 'stopping' && dockerContainer.status != 'removing') {
      <button mat-icon-button (click)="editContainer(dockerContainer)">
        <mat-icon>edit</mat-icon>
      </button>

      <containerized-confirm-button icon="delete" (confirmed)="deleteContainer(dockerContainer)" />
    }
  </ng-template>

  <ng-template #idCellDataTemplate let-id="value">
    {{ id | slice:0:10 }}...
  </ng-template>

  <ng-template #statusCellDataTemplate let-status="value">
    <mat-chip-listbox>
      <mat-chip [ngStyle]="{'background-color': indicatorColor(status)}">{{ status }}</mat-chip>
    </mat-chip-listbox>
  </ng-template>
</containerized-grid-table-view>
